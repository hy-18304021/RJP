・コードが汚い。jspでスクリプトレットを多用しすぎていて見にくい。EL式やjstlを多用する。あとデータベース側のコードに無駄なところがある。
直接OracleDBAにつなげばいいんじゃね？みたいなところが多い。

・コメントやスレッドにナンバーを付けていない。つける方法が分からん。レスやスレッドの数を出すメソッドをつくって、登録する瞬間にその数+1をしてあげた数をデータベースに入れてあげればよいのか？このナンバーを付けることができれば最近投稿された順
に並べ替えるとかがしやすくなる。

・まだスレッドごとのレスの数を出す処理をしていない。これはtestresからsumを求めるメソッドを準備すればいいと思う。

・スレッドの編集の処理をまだ書いていない。スレッドを作った人しか編集できないとかそういうところが難しそう。
レスの編集の処理もまだ書いてない。編集というか削除みたいな。

・レスとかスレッドがいくつ過ぎたら次のページに見たいなやつをまだ実装していない。

・データベース設計がひどいかもしれない。

・今回はかなりデザインとかも重視したい。javascriptまでしっかりやりたい。

・現時点でスレッド名が同じだと違う日に立てたスレッドだとしてもコメントが同じになってしまう。が、いずれスレッド一つ一つにかぶらない番号を振るからその番号での判別にすれば問題ない。

・日付関連。これはbeansの方で各スレッド、レス自身ににしっかりとした日付書式に基づいたdate型を入れるようにする。

・トップにもどるためだけのサーブレットを用意したほうがシンプルになりそう。

・同じ名前のスレッド名を付けられないように、同じ名前でログインできないように。同じパスワードでログインできないように、ちゃんとしたアドレスかどうか、記入漏れがないかなどの入力値チェックが全然できていない。

・データベース側の時間関連の列の型がDateだがtimestamp型にしたほうが良いかもしれない。timestamp型にしたら何時間前のコメントとかが分かるようにできるかも。

・スレッドで勝手に番号を触れるようになったが、まだそれを検索とかに使っていない。

・レスのthreadnameをthrea_idにする。そうしないと違うスレッドナンバーの同じ名前のスレッドを判別できなくなる。






ナンバーを付ける方法←まだ確実じゃない。
スレッドの場合
①createboard.jspでスレッドを作るときに1から数字を付ける。で次から次に順番に数字を付ける。で、もしスレッドを一つ消したときには数字がずれたりしてほしい。←これだめだ。

②スレッドを作るときにbeansにIDを入れなくてもいいと思う。データベース上で連番でIDが勝手にふられればよいと思う。レスを作るときはデータベース上でスレッド名別に連番を勝手にふられるようにする。←sql文がくそ難しくなりそう。不採用。

③連番用のテーブルをスレッド、レスに関するテーブルを作る。←sql文はそんなに難しくなさそうだが処理が大変になりそう。
一番最初のスレッドにはデフォルトで1を入れておく。その後maxで値を取り出し、その値に+1して次のスレッドのナンバーに入れる。各スレッドに関するレスについてはデフォルトに1を入れておく。その後スレッド検索をしてそのスレッドごとにmaxで値をとりだしてその値に+1した値を入れる。

④シーケンスを作って自動採番にする。←シーケンスの理解がむずい。けど使うべきだと思う。
インサートをするときにシーケンスも挿入することにより、連番ができるのではないか。
だからスレッドを作るときに連番を振るときには
if(スレッド専用のシーケンスがあるか){ そのままシーケンスごとinsert}else{スレッドに関するシーケンスを作ってinsert}
if(そのスレッドに対するレス専用のシーケンスがあるか){そのままシーケンスごとinsert}else{スレッドに対するレス専用のシーケンスを作ってinsert　}
って感じになりそう。




